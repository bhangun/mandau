agent:
  id: ""
  hostname: ""
  labels:
    environment: "development"
    datacenter: "local"
    zone: "local"

server:
  listen_addr: ":8444"
  tls:
    cert_path: "certs/agent.crt"
    key_path: "certs/agent.key"
    ca_path: "certs/ca.crt"
    min_version: "TLS1.3"
    server_name: "mandau-agent"

server_connection:
  core_addr: "localhost:8443"
  tls:
    cert_path: "certs/agent.crt"
    key_path: "certs/agent.key"
    ca_path: "certs/ca.crt"
    min_version: "TLS1.3"
    server_name: "mandau-core"

docker:
  socket: "/var/run/docker.sock"
  api_version: "1.41"

stacks:
  root_dir: "./stacks"
  max_concurrent_operations: 5

plugins:
  enabled:
    rbac-auth: true
  configs:
    rbac-auth:
      roles: |
        roles:
          - name: admin
            permissions:
              - resource: "*"
                actions: ["*"]
          - name: operator
            permissions:
              - resource: "stack:*"
                actions: ["read", "write", "delete"]
              - resource: "container:*"
                actions: ["read", "exec", "logs"]
              - resource: "image:*"
                actions: ["read", "pull"]
              - resource: "file:*"
                actions: ["read", "write"]
          - name: viewer
            permissions:
              - resource: "*"
                actions: ["read", "logs"]
        users:
          - id: "mandau-core"
            name: "Core Server"
            roles: ["admin"]
          - id: "mandau-cli"
            name: "CLI User"
            roles: ["admin"]
          - id: "admin@example.com"
            name: "Administrator"
            roles: ["admin"]
          - id: "ops@example.com"
            name: "Operations Team"
            roles: ["operator"]

security:
  exec_timeout: "1h"
  log_retention: "30d"
  terminal_recording: true