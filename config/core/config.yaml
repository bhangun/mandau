server:
  listen_addr: ":8443"
  tls:
    cert_path: "certs/core.crt"
    key_path: "certs/core.key"
    ca_path: "certs/ca.crt"
    min_version: "TLS1.3"
    server_name: "mandau-core"

plugins:
  enabled:
    rbac-auth: false
    file-audit: true
  configs:
    rbac-auth:
      roles: |
        roles:
          - name: admin
            permissions:
              - resource: "*"
                actions: ["*"]
          - name: operator
            permissions:
              - resource: "stack:*"
                actions: ["read", "write", "delete"]
              - resource: "container:*"
                actions: ["read", "exec", "logs"]
              - resource: "image:*"
                actions: ["read", "pull"]
              - resource: "file:*"
                actions: ["read", "write"]
          - name: viewer
            permissions:
              - resource: "*"
                actions: ["read", "logs"]
        users:
          - id: "admin@example.com"
            name: "Administrator"
            roles: ["admin"]
          - id: "ops@example.com"
            name: "Operations Team"
            roles: ["operator"]
          - id: "mandau-agent"
            name: "Agent User"
            roles: ["admin"]  # Agent needs admin rights to manage stacks on its host
          - id: "mandau-cli"
            name: "CLI User"
            roles: ["admin"]

agent_management:
  heartbeat_interval: "30s"
  offline_timeout: "90s"
  auto_deregister: false

plugin_dir: "/usr/lib/mandau/plugins"